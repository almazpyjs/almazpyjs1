# Telegram календарь-бот

Асинхронный Telegram-бот, реализованный на `aiogram 3`, который позволяет управлять персональным календарём.

## Возможности

- создание, просмотр и удаление событий с помощью интерактивных кнопок;
- выбор даты через встроенный календарь, а также времени, длительности и напоминания;
- кастомный ввод названия, времени и длительности события;
- напоминания с учётом часового пояса пользователя;
- экспорт событий в текстовом и JSON-форматах;
- индивидуальные настройки часового пояса и напоминаний для каждого пользователя;
- хранение данных в SQLite и асинхронные операции;
- защита от спама с помощью middleware ограничения частоты запросов.

## Запуск

1. Установите зависимости:

   ```bash
   pip install -e .
   ```

2. Создайте `.env` или экспортируйте переменную окружения `BOT_TOKEN` с токеном бота. При необходимости укажите путь к базе данных и интервал проверки напоминаний:

   ```bash
   export BOT_TOKEN=xxxxxxxxxxxxxxxxxxxxx
   export DATABASE_PATH=calendar.db  # опционально
   export REMINDER_INTERVAL=30        # опционально, секунды
   ```

3. Запустите бота:

   ```bash
   python -m bot.main
   ```

Бот автоматически создаёт базу данных и таблицы, а также запускает фоновую службу напоминаний.

## Структура проекта

- `bot/config.py` – загрузка настроек из переменных окружения.
- `bot/database.py` – асинхронные запросы к базе данных SQLite.
- `bot/handlers/main.py` – обработчики команд, кнопок и сценариев FSM.
- `bot/keyboards/main.py` – генерация интерактивных клавиатур.
- `bot/middlewares/rate_limit.py` – защита от спама.
- `bot/services/reminders.py` – служба напоминаний.
- `bot/utils/datetime.py` – утилиты для работы с датой, временем и часовыми поясами.

## Тестирование

Для минимальной проверки корректности синтаксиса можно выполнить сборку bytecode:

```bash
python -m compileall bot
```
